C51 COMPILER V9.54   MAIN                                                                  02/21/2026 15:25:50 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\main.c\kile5MDK\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listi
                    -ngs\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "LCD1602.h"
   4          
   5          unsigned char KeyNum;
   6          
   7          unsigned char MatrixKey()
   8          {
   9   1        unsigned char KeyNumber=0;
  10   1        
  11   1      //  for(i=1;i<5;i++)
  12   1      //  {
  13   1      //    P1=0xFF;
  14   1      //    switch(i)
  15   1      //    {
  16   1      //      case 1:P1_7=0;break;
  17   1      //      case 2:P1_6=0;break;
  18   1      //      case 3:P1_5=0;break;
  19   1      //      case 4:P1_4=0;break;
  20   1      //    }
  21   1      //    cnt=(i-1)*4;
  22   1      //    if(P1_3==0){Delayms(10);while(P1_3==0);Delayms(10);KeyNumber=1+cnt;}
  23   1      //    if(P1_2==0){Delayms(10);while(P1_2==0);Delayms(10);KeyNumber=2+cnt;}
  24   1      //    if(P1_1==0){Delayms(10);while(P1_1==0);Delayms(10);KeyNumber=3+cnt;}
  25   1      //    if(P1_0==0){Delayms(10);while(P1_0==0);Delayms(10);KeyNumber=4+cnt;}
  26   1      //    
  27   1      //  }
  28   1        P1=0xFF;
  29   1        P1_7=0;
  30   1        if(P1_3==0){Delayms(10);while(P1_3==0);Delayms(10);KeyNumber=1;}
  31   1        if(P1_2==0){Delayms(10);while(P1_2==0);Delayms(10);KeyNumber=2;}
  32   1        if(P1_1==0){Delayms(10);while(P1_1==0);Delayms(10);KeyNumber=3;}
  33   1        if(P1_0==0){Delayms(10);while(P1_0==0);Delayms(10);KeyNumber=4;}
  34   1        
  35   1        P1=0xFF;
  36   1        P1_6=0;
  37   1        if(P1_3==0){Delayms(10);while(P1_3==0);Delayms(10);KeyNumber=5;}
  38   1        if(P1_2==0){Delayms(10);while(P1_2==0);Delayms(10);KeyNumber=6;}
  39   1        if(P1_1==0){Delayms(10);while(P1_1==0);Delayms(10);KeyNumber=7;}
  40   1        if(P1_0==0){Delayms(10);while(P1_0==0);Delayms(10);KeyNumber=8;}
  41   1        
  42   1        P1=0xFF;
  43   1        P1_5=0;
  44   1        if(P1_3==0){Delayms(10);while(P1_3==0);Delayms(10);KeyNumber=9;}
  45   1        if(P1_2==0){Delayms(10);while(P1_2==0);Delayms(10);KeyNumber=10;}
  46   1        if(P1_1==0){Delayms(10);while(P1_1==0);Delayms(10);KeyNumber=11;}
  47   1        if(P1_0==0){Delayms(10);while(P1_0==0);Delayms(10);KeyNumber=12;}
  48   1        
  49   1        P1=0xFF;
  50   1        P1_4=0;
  51   1        if(P1_3==0){Delayms(10);while(P1_3==0);Delayms(10);KeyNumber=13;}
  52   1        if(P1_2==0){Delayms(10);while(P1_2==0);Delayms(10);KeyNumber=14;}
  53   1        if(P1_1==0){Delayms(10);while(P1_1==0);Delayms(10);KeyNumber=15;}
  54   1        if(P1_0==0){Delayms(10);while(P1_0==0);Delayms(10);KeyNumber=16;}
C51 COMPILER V9.54   MAIN                                                                  02/21/2026 15:25:50 PAGE 2   

  55   1      
  56   1        return KeyNumber;
  57   1        
  58   1      }
  59          
  60          //LCD_Init();
  61          //void LCD_ShowChar(unsigned char Line,unsigned char Column,char Char);
  62          //void LCD_ShowString(unsigned char Line,unsigned char Column,char *String);
  63          //void LCD_ShowNum(unsigned char Line,unsigned char Column,unsigned int Number,unsigned char Length);
  64          //void LCD_ShowSignedNum(unsigned char Line,unsigned char Column,int Number,unsigned char Length);
  65          //void LCD_ShowHexNum(unsigned char Line,unsigned char Column,unsigned int Number,unsigned char Length);
  66          //void LCD_ShowBinNum(unsigned char Line,unsigned char Column,unsigned int Number,unsigned char Length);
  67          
  68          
  69          unsigned long password;
  70          
  71          void Passeord ()
  72          {
  73   1        static unsigned char count;
  74   1        KeyNum=MatrixKey();
  75   1        if(KeyNum)
  76   1        {
  77   2          if(KeyNum<11)
  78   2          {
  79   3            if(count<5)
  80   3            {
  81   4              password*=10;
  82   4              password+=KeyNum%10;
  83   4              count++;
  84   4            }
  85   3            
  86   3            LCD_ShowNum(2,1,password,5);
  87   3          }
  88   2          if(KeyNum==11)
  89   2          {
  90   3            
  91   3            if(password==20266)
  92   3            {
  93   4              LCD_ShowString(1,13,"OK!");
  94   4            }else {
  95   4                LCD_ShowString(1,13,"ERR!");
  96   4                Delayms(1500);
  97   4                LCD_ShowString(1,13,"    ");
  98   4                password=0;
  99   4                count=0;
 100   4                LCD_ShowNum(2,1,password,5);
 101   4                  }
 102   3          }
 103   2          if(password!=20266)
 104   2          {
 105   3            if(KeyNum==12)
 106   3            { 
 107   4              if(count>0)
 108   4              {
 109   5                password/=10;
 110   5                count--;
 111   5                LCD_ShowNum(2,1,password,5);
 112   5              }
 113   4            }
 114   3          }
 115   2          if(KeyNum==13)
 116   2          {
C51 COMPILER V9.54   MAIN                                                                  02/21/2026 15:25:50 PAGE 3   

 117   3            LCD_ShowString(1,13,"    ");
 118   3            password=0;
 119   3            count=0;
 120   3            LCD_ShowNum(2,1,password,5);
 121   3          }
 122   2        }
 123   1      }
 124          
 125          void main ()
 126          {
 127   1        LCD_Init();
 128   1        LCD_ShowString(1,1,"Password:");
 129   1        LCD_ShowNum(2,1,password,5);
 130   1        while(1)
 131   1        {
 132   2          
 133   2          Passeord ();
 134   2        }
 135   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    775    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
